<div class="modern-sidebar">
  <!-- En-tête du sidebar -->
  <div class="sidebar-header">
    <div class="header-content">
      <h2 class="app-title">
        <mat-icon class="title-icon">inventory</mat-icon>
        <span class="title-text">SN-STOCK</span>
      </h2>
      <div class="user-info">
        <div class="user-avatar">
          <span class="avatar-text">{{ getUserInitial() }}</span>
        </div>
        <div class="user-details">
          <p class="user-name">{{ getUserName() }}</p>
          <span class="user-role">{{ getUserRole() }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Menu de navigation -->
  <nav class="sidebar-nav">
    <div class="nav-container">
      <ng-container *ngFor="let menuItem of filteredMenus">
        <!-- Élément simple sans sous-menu -->
        <ng-container *ngIf="!menuItem.subMenuItems">
          <a class="nav-item"
             [routerLink]="['/workspace/dashboard', menuItem.link]"
             routerLinkActive="active"
             #rla="routerLinkActive"
             [class.active]="rla.isActive">
            <div class="nav-item-content">
              <div class="nav-icon-container">
                <mat-icon class="nav-icon">{{ menuItem.icon }}</mat-icon>
              </div>
              <span class="nav-label">{{ menuItem.label }}</span>
            </div>
            <div class="nav-indicator" *ngIf="rla.isActive">
              <mat-icon class="indicator-icon">chevron_right</mat-icon>
            </div>
          </a>
        </ng-container>

        <!-- Élément avec sous-menu -->
        <ng-container *ngIf="menuItem.subMenuItems">
          <div class="nav-section">
            <div class="section-header" (click)="toggleSection(menuItem.label)">
              <div class="section-icon">
                <mat-icon>{{ menuItem.icon }}</mat-icon>
              </div>
              <span class="section-label">{{ menuItem.label }}</span>
              <mat-icon class="toggle-icon">
                {{ isSectionOpen(menuItem.label) ? 'expand_less' : 'expand_more' }}
              </mat-icon>
            </div>

            <div class="section-content" [class.open]="isSectionOpen(menuItem.label)">
              <a *ngFor="let subMenuItem of menuItem.subMenuItems"
                 class="subnav-item"
                 [routerLink]="['/workspace/dashboard', subMenuItem.link]"
                 routerLinkActive="active"
                 #subRla="routerLinkActive"
                 [class.active]="subRla.isActive">
                <div class="subnav-item-content">
                  <div class="subnav-icon">
                    <mat-icon>{{ subMenuItem.icon }}</mat-icon>
                  </div>
                  <span class="subnav-label">{{ subMenuItem.label }}</span>
                </div>
                <div class="subnav-indicator" *ngIf="subRla.isActive"></div>
              </a>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </nav>

  <!-- Pied de page -->
  <div class="sidebar-footer">
    <div class="footer-content">
      <div class="time-display">
        <mat-icon class="time-icon">schedule</mat-icon>
        <span class="time-text">{{ currentTime | date:'HH:mm' }}</span>
      </div>
      <button mat-icon-button
              class="logout-btn"
              matTooltip="Déconnexion"
              (click)="logout()">
        <mat-icon>logout</mat-icon>
      </button>
    </div>
  </div>
</div>